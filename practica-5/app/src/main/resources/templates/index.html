<!doctype html>
<html lang="en" data-bs-theme="auto" xmlns:th="https://www.thymeleaf.org">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/blog/">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Playfair&#43;Display:700,900&amp;display=swap" rel="stylesheet">
  <link href="/assets/css/blog.css" rel="stylesheet">
  <script src="/assets/js/color-modes.js"></script>
  <title th:text="${title}">Practica-2</title>
</head>

<body>
  <div th:replace="~{/layouts/toggle-theme.html :: select-theme}"></div>
  <div class="container">
    <header class="border-bottom lh-1 py-3">
      <div class="row flex-nowrap justify-content-between align-items-center">
        <div class="col-4 pt-1">
          <a class="link-secondary" href=""> </a>
        </div>
        <div class="col-4 text-center">
          <a class="blog-header-logo text-body-emphasis text-decoration-none" href="/">Wornux</a>
        </div>
        <div class="col-4 gap-2 d-flex justify-content-end align-items-center">
          <a th:if="${role == 'ADMIN' || role == 'AUTHOR'}" class="btn btn-sm btn-outline-secondary"
            th:href="@{/createarticle}">Create article</a>

          <a th:if="${role == 'ADMIN'}" class="btn btn-sm btn-outline-secondary" th:href="@{/createuser}">Create
            user</a>

          <a th:if="${!logged}" class="btn btn-sm btn-outline-secondary" th:href="@{/login}">Log in</a>

          <form th:if="${role == 'USER' || role == 'AUTHOR'}" th:action="@{'/users/' + ${user.username}}" method="post">
            <button type="submit" class="btn btn-sm btn-danger">Update account</button>
          </form>
          <!-- BotÃ³n para ir a Manage Users-->
          <a th:if="${role == 'ADMIN'}" href="/manageusers" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-people"></i> Manage Users
          </a>

          <form th:if="${logged}" th:action="@{/logout}" method="post">
            <button type="submit" class="btn btn-sm btn-danger">Log out</button>
          </form>

        </div>
      </div>
    </header>

    <div class="nav-scroller py-1 mb-3 border-bottom">
      <nav class="nav nav-underline justify-content-between" id="tag-nav">
        <th:block th:each="tag : ${tagCollection}">
          <a class="nav-item nav-link link-body-emphasis active tag-link" href="#" th:attr="data-tag=${tag.name}"
            th:text="${tag.name}"></a>
        </th:block>
      </nav>
    </div>
  </div>

  <!-- ðŸ”¹ SECCIÃ“N DE MENSAJES DE BIENVENIDA -->
  <div class="welcome-message text-center my-4">
    <h2 th:if="${role == 'ADMIN'}">Welcome, Admin! Manage your platform.</h2>
    <h2 th:if="${role == 'AUTHOR'}">Welcome, Author! Ready to write?</h2>
    <h2 th:if="${role == 'USER'}">Hello, User! Enjoy our latest articles.</h2>
    <h2 th:if="${role == 'GUEST'}">Welcome, Guest!</h2>
  </div>
  <!----------------------------------------------------->
  <main class="container">
    <div id="featured-article" class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary"></div>

    <div class="row mb-2">
      <div id="left-column" class="col-md-6"></div>
      <div id="right-column" class="col-md-6"></div>
    </div>

    <ul class="nav justify-content-center gap-2 mb-4">
      <li class="nav-item">
        <button id="prev-btn" class="btn btn-secondary" disabled>Prev page</button>
      </li>
      <li class="nav-item">
        <button id="next-btn" class="btn btn-secondary" disabled>Next page</button>
      </li>
    </ul>
  </main>
  <!-- Elemento oculto para almacenar el usuario desde Thymeleaf -->
   <span id="thymeleaf-username" th:text="${user != null ? user.username : ''}" style="display: none;"></span>

  <div th:replace="~{fragments/chat.html :: chat}"></div>

  <div th:replace="~{/layouts/footer.html :: footer}"></div>
  <script src="/assets/js/bootstrap.bundle.min.js"></script>
  <!-- AJAX implementation -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="/assets/js/ajax.js"></script>

</body>

</html>
