<div th:fragment="map">
  <!-- Mock de puntos (esto se reemplazará por los puntos reales desde el controlador) -->
  <script th:inline="javascript">
    let points = [
      {lat: 18.4719, lng: -69.8923},  // Ejemplo: Santo Domingo
      {lat: 19.4326, lng: -99.1332},  // Ejemplo: Ciudad de México
      {lat: 40.7128, lng: -74.0060}   // Ejemplo: Nueva York
    ];

    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 7,
        center: points[0] || {lat: 18.4719, lng: -69.8923}, // Centro en Santo Domingo si no hay puntos
      });

      const lineSymbol = {
        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
      };

      const flightPath = new google.maps.Polyline({
        path: points,
        geodesic: true,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 4,
        icons: [
          {
            icon: lineSymbol,
            offset: "100%",
          },
        ],
      });

      flightPath.setMap(map);

      points.forEach((point, index) => {
        const marker = new google.maps.marker.AdvancedMarkerElement({
          position: point,
          map: map,
          title: `Punto ${index + 1}`,
        });
      });
    }

    window.onload = initMap;
  </script>
  <div id="map" class="h-screen w-full"></div>
</div>
