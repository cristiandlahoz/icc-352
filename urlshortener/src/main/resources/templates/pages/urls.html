<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/quaters.css}">
  <link rel="stylesheet" th:href="@{/css/tailwind.css}">
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
  <script th:src="@{/js/toggleSideMenu.js}"></script>
  <script th:src="@{/js/toggleAvatarMenu.js}"></script>
  <title>Wornux - Links</title>
  <meta name="description"
    content="Wornux is an efficient and easy-to-use URL shortening service that streamlines your online experience.">
</head>

<body>
  <aside th:replace="~{components/navbar.html :: navbar}"></aside>
  <header th:replace="~{components/header.html :: header}"></header>
  <main>
    <div class="hidden lg:block">
      <span class="absolute box-base shadow-box box-animation-1 top-[5%] right-[20%]"></span>
      <span class="absolute box-base shadow-box box-animation-2 bottom-[15%] right-[19%] "></span>
      <span class="absolute box-base shadow-box box-animation-1 bottom-[9%] left-[14%]"></span>
    </div>

    <!-- desktop table -->
    <section th:if="${!urls.isEmpty()}" class="hidden ml-38 m-12 lg:flex">
      <table class="w-full text-white table-auto">
        <thead class="bg-btn-gray">
          <tr>
            <th class="py-3 font-normal text-center rounded-tl-lg">Short Link </th>
            <th class="py-3 font-normal text-center ">Original Link</th>
            <th class="py-3 font-normal text-center ">QR Code</th>
            <th class="py-3 font-normal text-center ">Clicks</th>
            <th class="py-3 font-normal text-center ">Status</th>
            <th class="py-3 font-normal text-center rounded-tr-lg">Date</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="url : ${urls}" class="bg-table-gray backdrop-blur-sm border-y-8 border-y-transparent">
            <td class="flex items-center justify-center py-2 text-center gap-x-3 border-btn-gray-border">
              <a th:href="'s/' + ${url.shortenedUrl}" target="_blank" class="hover:underline">
                <p th:text="${url.shortenedUrl}"></p>
              </a>
              <button class="flex items-center justify-center rounded-full size-9 bg-btn-gray"
                onclick="copyToClipboard(this)" th:attr="data-url=${url.shortenedUrl}" title="Copy to clipboard">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="rounded-full icon icon-tabler icons-tabler-outline icon-tabler-copy bg-btn-gray hover:text-orange-300 hover:scale-110">
                  <path stroke=" none" d="M0 0h24v24H0z" fill="none" />
                  <path
                    d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" />
                  <path
                    d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" />
                </svg>
              </button>
            </td>
            <td class="py-2 text-center border-btn-gray-border hover:underline max-w-80 overflow-hidden"
              th:text="${#strings.length(url.originalUrl) > 32 ? #strings.substring(url.originalUrl, 0, 32) + '...' : (url.originalUrl)}">
            </td>
            <td class="px-4 py-2 text-center border-btn-gray-border ">
              <a th:href="'/shortened/' + ${url.id} + '/qr'" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" class="m-auto size-8" viewBox="0 0 300 300"
                  shape-rendering="geometricPrecision" text-rendering="geometricPrecision">
                  <path
                    d="M0 125V0h125v125H0Zm100.873-24.127V24.127H24.127v76.746h76.746ZM175 125V0h125v125H175Zm100.873-24.127V24.127h-76.746v76.746h76.746Z"
                    fill="#666" />
                  <rect width="100" height="100" rx="0" ry="0" transform="matrix(.28833 0 0 .29003 223.083 47.998)"
                    fill="#666" />
                  <path d="M0 300V175h125v125H0Zm100.873-24.127v-76.746H24.127v76.746h76.746Z" fill="#666" />
                  <rect width="100" height="100" rx="0" ry="0" transform="matrix(.28833 0 0 .29003 48.083 222.998)"
                    fill="#666" />
                  <rect width="100" height="100" rx="0" ry="0" transform="matrix(.76745 0 0 .76745 200 335.085)"
                    fill="#fff" />
                  <rect width="100" height="100" rx="0" ry="0" transform="matrix(.28833 0 0 .29003 48.083 47.998)"
                    fill="#666" />
                  <rect width="25" height="30" rx="0" ry="0" transform="translate(0 150)" fill="#666" />
                  <rect width="25" height="30" rx="0" ry="0" transform="translate(75 150)" fill="#666" />
                  <rect width="25" height="30" rx="0" ry="0" transform="translate(25 120)" fill="#666" />
                  <rect width="25" height="30" rx="0" ry="0" transform="translate(275 120)" fill="#666" />
                  <rect width="25" height="30" rx="0" ry="0" transform="translate(225 120)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(200 150)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(150 150)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="matrix(1 0 0 1.41206 150 168.82)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(175 250)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="matrix(1.59923 0 0 1 150 250)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(175 275)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(250 252.002)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(275 197.998)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(200 226)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(200 226)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="matrix(1 0 0 1.2001 175 196.998)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="matrix(1.5 0 0 1.2001 150 196.998)"
                    fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(275 275)" fill="#666" />
                  <rect width="25" height="25" rx="0" ry="0" transform="translate(225 275)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="matrix(1.337 0 0 1 114.945 175)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="matrix(4.59826 0 0 1 162.052 175)"
                    fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="translate(120 100)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="translate(120 25)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="translate(150)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="translate(150 75)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="translate(120 226)" fill="#666" />
                  <rect width="30" height="25" rx="0" ry="0" transform="translate(120 275)" fill="#666" />
                </svg>
              </a>
            </td>
            <td class="py-2 text-center border-btn-gray-border" th:text="${url.clickCount}"></td>
            <td class="flex items-center justify-center px-4 py-2 gap-x-3 border-btn-gray-border"
              th:if="${url.isOffensive}">
              <p class="text-center text-yellow-600 min-w-14">Inactive</p>
              <div class="flex items-center justify-center rounded-full size-9 bg-yellow-600/30">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
                  class="icon icon-tabler icons-tabler-outline icon-tabler-link-off">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M9 15l3 -3m2 -2l1 -1" />
                  <path d="M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464" />
                  <path d="M3 3l18 18" />
                  <path d="M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463" />
                </svg>
              </div>
            </td>
            <td class="flex items-center justify-center py-2 text-center gap-x-3 border-btn-gray-border"
              th:unless="${url.isOffensive}">
              <p class="text-center text-green-600 min-w-14">Active</p>
              <div class="flex items-center justify-center rounded-full size-9 bg-green-600/30">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
                  class="icon icon-tabler icons-tabler-outline icon-tabler-link">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path d="M9 15l6 -6" />
                  <path d="M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464" />
                  <path d="M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463" />
                </svg>
              </div>
            </td>
            <td class="px-4 py-2 text-center border-btn-gray-border"
              th:text="${#dates.format(url.createdAt, 'dd/MM/yyyy HH:mm')}">
            </td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Dropdown menu -->
    <div id="userDropdown"
      class="absolute right-[2%] top-[11%] mt-2 z-10 hidden bg-btn-gray divide-y divide-btn-gray-border rounded-lg shadow w-44">
      <div class="px-4 py-3 text-sm text-white">
        <p th:text="${user.username}"></p>
        <p class="font-medium truncate" th:text="${user.email}"></p>
      </div>
      <ul class="py-2 text-sm text-white" aria-labelledby="avatarButton">
        <li>
          <a href="/dashboard" class="block px-4 py-2 hover:bg-btn-blue">Dashboard</a>
        </li>
        <li>
          <a href="/auth/logout" class="block px-4 py-2 hover:bg-btn-blue">Log Out</a>
        </li>
      </ul>
    </div>
</body>

</html>
